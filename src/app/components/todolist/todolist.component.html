<div class="container my-5 d-flex justify-content-center">
  <div class="card border rounded-3 p-4" style="max-width: 600px; width: 100%">
    <form (ngSubmit)="onSubmit(taskForm)" #taskForm="ngForm" class="row g-3">
      <!-- Name Input -->
      <h2 class="display-8 fw-semi-bold text-body-emphasis text-center">
        TaskOrganizr
      </h2>
      <div class="col-12">
        <input
          type="text"
          required
          class="form-control"
          id="taskName"
          placeholder="Enter Task Name"
          ngModel
          name="taskName"
        />
      </div>
      <!-- Description Input -->
      <div class="col-12">
        <input
          type="text"
          required
          class="form-control"
          id="taskDescription"
          placeholder="Enter Description"
          ngModel
          name="taskDescription"
        />
      </div>
      <!-- Submit Button -->
      <div class="col-12">
        <button
          [disabled]="taskForm.invalid"
          type="submit"
          class="btn btn-primary w-100"
        >
          Submit
        </button>
      </div>
    </form>
  </div>
</div>

<div class="container">
  <div *ngIf="taskList.length > 0">
    <div
      *ngFor="let task of taskList; let i = index"
      class="card"
      style="width: 19rem; height: 20rem; overflow: hidden"
    >
      <button
        type="button"
        class="btn-danger btn-close m-2 text-danger"
        (click)="onDeleteTask(i)"
      ></button>
      <div class="card-body d-flex flex-column">
        <input
          class="form-control"
          type="text"
          [(ngModel)]="task.taskName"
          [readonly]="!task.isNameEditable"
        />

        <input
          class="form-control"
          type="text"
          [(ngModel)]="task.taskDescription"
          [readonly]="!task.isDescriptionEditable"
        />

        <div class="d-flex gap-3">
          @if(task.isNameEditable){
          <button class="btn btn-warning" (click)="onSaveName(i)">
            Save Name
          </button>
          }@else {
          <button class="btn btn-secondary" (click)="onEditName(i)">
            Edit Name
          </button>
          } @if(task.isDescriptionEditable){
          <button class="btn btn-warning" (click)="onSaveDescription(i)">
            Save Description
          </button>
          }@else {
          <button class="btn btn-secondary" (click)="onEditDescription(i)">
            Edit Description
          </button>
          }
        </div>
        <button
          type="button"
          class="btn btn-primary mt-2"
          (click)="onCompleteTask(i)"
        >
          Complete
        </button>
      </div>
    </div>
  </div>
</div>
