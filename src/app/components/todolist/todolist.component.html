<div class="container">
  <h1 class="text-center p-4 m-2 text-white">To-do List</h1>

  <form
    (ngSubmit)="onSubmit(taskForm)"
    #taskForm="ngForm"
    class="d-flex align-items-center justify-content-center"
  >
    <input
      type="text"
      required
      class="form-control w-50 rounded-start"
      id="task"
      placeholder="Enter Goal"
      ngModel
      name="task"
    />
    <button
      [disabled]="taskForm.invalid"
      type="submit"
      class="btn btn-primary rounded-end"
    >
      Submit
    </button>
  </form>

  @if (taskForm.dirty && taskForm.invalid) {
  <small id="error" class="form-text text-danger">Required Field</small>
  }
  <hr />

  @if (taskList.length>0) {
  <table class="table table-rounded">
    <thead class="text-center">
      <tr>
        <th scope="col">Task</th>
        <th scope="col">Completed</th>
        <th scope="col">Delete</th>
        <th scope="col">Edit</th>
        <th scope="col">Save</th>
      </tr>
    </thead>
    <tbody class="text-center">
      @for (task of taskList; track $index) {
      <tr>
        <td class="text-center">
          <input
            type="text"
            class="form-control w-100 text-center"
            id="taskInTable"
            value="{{ task.taskName }}"
            [readOnly]="!task.isEditable"
            #taskInput
            [ngClass]="{
              edit: task.isEditable,
              notedit: !task.isEditable,
              crossed: task.isCompleted
            }"
          />
        </td>
        <td class="text-center">
          <input
            type="checkbox"
            (change)="onCheck($index)"
            [checked]="task.isCompleted"
          />
        </td>
        <td>
          <button
            type="submit"
            class="btn btn-danger btn-sm"
            (click)="onDeleteTask($index)"
          >
            Delete
          </button>
        </td>
        <td>
          <button
            type="submit"
            class="btn btn-warning btn-sm"
            (click)="onEditTask($index)"
            [disabled]="task.isEditable"
          >
            Edit
          </button>
        </td>
        <td>
          <button
            type="submit"
            class="btn btn-primary btn-sm"
            (click)="onSaveTask($index, taskInput.value)"
            [disabled]="!task.isEditable"
          >
            Save
          </button>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }
</div>
@if (taskList.length<=0) {
<div class="text-center text-white">
  <h4>Welcome to a new productive day!</h4>
  <h6 class="blinking">Stay focused, Stay organized and make things happen!</h6>
</div>

}
